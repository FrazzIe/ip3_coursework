<head>
	{{>header}}
</head>

<body>
	{{>nav}}
	{{>alert}}
	<div class="container">
		<div class="row align-items-center mt-2">
		{{#admin}}
			<div class="col-6">
				<h1 class="display-5 font-weight-bold">Available Quizzes</h1>
			</div>
			<div class="col-6">
				<div class="float-right">
					<button type="button" class="btn btn-info" data-toggle="modal" data-target="#create-modal">New Quiz</button>
				</div>

				<div class="modal fade" id="create-modal" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Create a quiz</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<form id="create-form">
								<div class="modal-body">
									<div class="form-group">
										<label for="create-label">Title</label>
										<input type="text" class="form-control" id="create-label">
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Create</button>
								</div>
							</form>
						</div>
					</div>
				</div>				
			</div>
		{{/admin}}
		{{^admin}}
			<div class="col text-center">
				<h1 class="display-5 font-weight-bold">Available Quizzes</h1>
			</div>
		{{/admin}}
		</div>
		<div class="row mt-1">
		{{#quizzes}}
			<div class="col">
				<div class="card">
					<div class="card-header">
						<div class="row align-items-center">
							<div class="col-6">
								{{ label }}
							</div>
							<div class="col-6">
								<div class="float-right">												
									{{ questions }} Question(s)
								</div>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="card-text">
							<div class="card-text">
								The <b>{{ label }}</b> quiz contains {{ questions }} question(s) and will take an estimated <span id="estimation-{{ id }}" data-count="{{ questions }}"></span> to complete.
							</div>
							{{#questions_answered}}
							<div class="card-text">
								You scored {{ score }} out of {{ questions }} in your last attempt which means you got <span id="percentage-{{ id }}" data-count="{{ questions }}" data-score="{{ score }}"></span> of questions right.
							</div>
							{{/questions_answered}}
						</div>
					</div>
					<div class="card-footer align-items-center">
						<div class="row">
							<div class="col-sm-6">
								<button type="button" class="btn btn-success">
								{{#questions_answered}}
									Retry
								{{/questions_answered}}
								{{^questions_answered}}
									Start
								{{/questions_answered}}
								</button>
								{{#admin}}
									{{#questions_answered}}
										<button type="button" class="btn btn-info">View Results</button>
									{{/questions_answered}}
								{{/admin}}
							</div>
							<div class="col-sm-6">
								<div class="float-right">
								{{#admin}}
									<a href="/quiz/edit/{{ id }}" class="btn btn-info">Edit</a>
									<a href="/quiz/delete/{{ id }}" class="btn btn-danger">Delete</a>
								{{/admin}}
								{{^admin}}
									{{#questions_answered}}
										<button type="button" class="btn btn-info">View Results</button>
									{{/questions_answered}}
								{{/admin}}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		{{/quizzes}}
		</div>
	</div>

	{{>footer}}
	<script src="/../../js/home.js"></script>
</body>